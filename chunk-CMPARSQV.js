import{O as I,Pb as y,Qb as l,Rb as w,T as j,a as i,b as u,ba as M,fa as x,ga as f}from"./chunk-EESSJM7L.js";function b(e){let t=y(()=>e());return P(t)?new Proxy(e,{get(n,s){return s in t?(x(n[s])||Object.defineProperty(n,s,{value:l(()=>n()[s]),configurable:!0}),b(n[s])):n[s]}}):e}var K=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function P(e){if(e===null||typeof e!="object"||A(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(K.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function A(e){return typeof e?.[Symbol.iterator]=="function"}var J=new WeakMap,c=Symbol("STATE_SOURCE");function h(e,...t){e[c].update(n=>t.reduce((s,o)=>i(i({},s),typeof o=="function"?o(s):o),n)),F(e)}function N(e){return e[c]()}function H(e){return J.get(e[c])||[]}function F(e){let t=H(e);for(let n of t){let s=y(()=>N(e));n(s)}}function k(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),s=t;return(()=>{class r{constructor(){let a=s.reduce((p,C)=>C(p),U()),{stateSignals:m,props:g,methods:W,hooks:E}=a,S=i(i(i({},m),g),W);this[c]=a[c];for(let p of Reflect.ownKeys(S))this[p]=S[p];let{onInit:v,onDestroy:L}=E;v&&v(),L&&j(M).onDestroy(L)}static \u0275fac=function(m){return new(m||r)};static \u0275prov=I({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function U(){return{[c]:f({}),stateSignals:{},props:{},methods:{},hooks:{}}}function q(e){return t=>{let n=e(i(i(i({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(i({},t),{props:i(i({},t.props),n)})}}function D(e){return q(e)}function R(e){return t=>{let n=i(i(i({[c]:t[c]},t.stateSignals),t.props),t.methods),s=typeof e=="function"?e(n):e,o=r=>{let d=s[r],a=t.hooks[r];return d?()=>{a&&a(),d(n)}:a};return u(i({},t),{hooks:{onInit:o("onInit"),onDestroy:o("onDestroy")}})}}function O(e){return t=>{let n=e(i(i(i({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(i({},t),{methods:i(i({},t.methods),n)})}}function T(e){return t=>{let n=typeof e=="function"?e():e,s=Reflect.ownKeys(n);t[c].update(r=>i(i({},r),n));let o=s.reduce((r,d)=>{let a=l(()=>t[c]()[d]);return u(i({},r),{[d]:b(a)})},{});return u(i({},t),{stateSignals:i(i({},t.stateSignals),o)})}}var $=k({providedIn:"root"},T({movieWatchList:[],showWatchList:[]}),D(e=>({moviesLength:l(()=>e.movieWatchList.length),showsLength:l(()=>e.showWatchList.length)})),O(e=>({addToMovieWatchlist:t=>h(e,n=>{if(n.movieWatchList.findIndex(o=>o.id===t.id)==-1){let o=[...n.movieWatchList,i({},t)];return localStorage.setItem("movieWishlist",JSON.stringify(o)),{movieWatchList:o}}return{movieWatchList:n.movieWatchList}}),addToShowWatchlist:t=>h(e,n=>{if(n.showWatchList.findIndex(o=>o.id===t.id)==-1){let o=[...n.showWatchList,i({},t)];return localStorage.setItem("showWishlist",JSON.stringify(o)),{showWatchList:o}}return{showWatchList:n.showWatchList}}),checkMovieWatchlist:t=>e.movieWatchList().findIndex(s=>s.id===t.id)!=-1,checkShowWatchlist:t=>e.showWatchList().findIndex(s=>s.id===t.id)!=-1,removeFromMovieWatchlist:t=>h(e,n=>{if(n.movieWatchList.findIndex(o=>o.id===t.id)!==-1){let o=n.movieWatchList.filter(r=>r.id!==t.id);return localStorage.setItem("movieWishlist",JSON.stringify(o)),{movieWatchList:o}}return{movieWatchList:n.movieWatchList}}),removeFromShowWatchlist:t=>h(e,n=>{if(n.showWatchList.findIndex(o=>o.id===t.id)!==-1){let o=n.showWatchList.filter(r=>r.id!==t.id);return localStorage.setItem("showWishlist",JSON.stringify(o)),{showWatchList:o}}return{showWatchList:n.showWatchList}}),clearMovieWatchlist:()=>h(e,()=>(localStorage.removeItem("movieWishlist"),{movieWatchList:[]})),clearShowWatchlist:()=>h(e,()=>(localStorage.removeItem("showWishlist"),{showWatchList:[]}))})),R(e=>({onInit:()=>{let t=JSON.parse(localStorage.getItem("movieWishlist")||"[]");h(e,()=>({movieWatchList:t}));let n=f(0),s=f(n()),o=JSON.parse(localStorage.getItem("showWishlist")||"[]");h(e,()=>({showWatchList:o}));let r=f(0),d=f(r());w(()=>{let a=e.movieWatchList(),m=s;s.set(a.length),n.set(a.length);let g=e.showWatchList(),W=d;d.set(g.length),r.set(g.length)})}})));export{$ as a};
